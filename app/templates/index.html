{% extends "base.html" %}

{% block title %}Home - RatPetShop OWASP Lab{% endblock %}

{% block content %}
<div class="hero">
    <div class="container">
        <h1>ğŸ€ Welcome to RatPetShop OWASP Lab</h1>
        <p class="hero-subtitle">Learn Cybersecurity by Exploiting the OWASP Top 10 Vulnerabilities</p>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3>{{ total_flags }}</h3>
                <p>Total Challenges</p>
            </div>
            <div class="stat-card">
                <h3>{{ total_users }}</h3>
                <p>Registered Users</p>
            </div>
            {% if session.user_id %}
            <div class="stat-card">
                <h3>{{ user_progress }}</h3>
                <p>Your Flags Captured</p>
            </div>
            {% endif %}
        </div>

        {% if not session.user_id %}
        <div class="cta-buttons">
            <a href="{{ url_for('auth.register') }}" class="btn btn-primary">Get Started</a>
            <a href="{{ url_for('main.about') }}" class="btn btn-secondary">Learn More</a>
        </div>
        {% else %}
        <div class="cta-buttons">
            <a href="{{ url_for('challenges.index') }}" class="btn btn-primary">Start Challenges</a>
            <a href="{{ url_for('speedrun.index') }}" class="btn btn-secondary">Try Speedrun Mode</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="container">
    <section class="section">
        <h2>ğŸ¯ Three Difficulty Levels</h2>
        <div class="difficulty-grid">
            <div class="difficulty-card easy">
                <h3>Easy</h3>
                <p>Perfect for beginners. Guided tutorials with hints and step-by-step instructions to exploit common vulnerabilities.</p>
            </div>
            <div class="difficulty-card medium">
                <h3>Medium</h3>
                <p>For intermediate users. Less guidance, more challenge. You'll need to apply your knowledge creatively.</p>
            </div>
            <div class="difficulty-card hard">
                <h3>Hard</h3>
                <p>For experts. Complex vulnerabilities requiring advanced techniques and deep understanding of security concepts.</p>
            </div>
        </div>
    </section>

    <section class="section">
        <h2>ğŸ† Features</h2>
        <div class="features-grid">
            <div class="feature-card">
                <h3>ğŸ“š OWASP Top 10</h3>
                <p>Learn about the most critical web application security risks through hands-on practice.</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ® Capture The Flag</h3>
                <p>Find and submit flags to earn points and climb the leaderboard.</p>
            </div>
            <div class="feature-card">
                <h3>âš¡ Speedrun Mode</h3>
                <p>Race against time to find randomly selected flags in a separate tenant.</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ“Š Scoreboard</h3>
                <p>Compete with other users and track your progress on the global leaderboard.</p>
            </div>
        </div>
    </section>

    {% if recent_submissions %}
    <section class="section">
        <h2>ğŸ“‹ Recent Activity</h2>
        <div class="activity-feed">
            <table class="activity-table">
                <thead>
                    <tr>
                        <th>User</th>
                        <th>Challenge</th>
                        <th>Points</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody>
                    {% for submission in recent_submissions %}
                    <tr>
                        <td>{{ submission.username }}</td>
                        <td>{{ submission.name }}</td>
                        <td>{{ submission.points_awarded }}</td>
                        <td>{{ submission.submitted_at.strftime('%Y-%m-%d %H:%M') }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>
    {% endif %}

    <section class="section warning-section">
        <h2>âš ï¸ Important Warning</h2>
        <p>This application is intentionally vulnerable for educational purposes. <strong>Never deploy this in a production environment or on a public server.</strong></p>
        <p>Use this lab in a controlled, isolated environment (like a local machine or VM) to learn about security vulnerabilities safely.</p>
    </section>
</div>
{% endblock %}
